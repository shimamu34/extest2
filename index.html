<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中学体力テスト</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>📊 体力テスト 2025</h1>
    
    <div class="card no-print" style="text-align:center">
        <button class="btn" style="background:linear-gradient(135deg,#2196F3,#1976D2)" onclick="exportData()">💾 バックアップ</button>
        <button class="btn" style="background:linear-gradient(135deg,#2196F3,#1976D2)" onclick="importData()">📂 復元</button>
        <button class="btn" style="background:linear-gradient(135deg,#ff9800,#f57c00)" onclick="clearAllData()">🗑️ クリア</button>
        <button class="btn" style="background:linear-gradient(135deg,#9c27b0,#7b1fa2)" onclick="window.print()">🖨️ 印刷</button>
        <button class="btn" style="background:linear-gradient(135deg,#4CAF50,#388E3C)" onclick="saveYearData()">📅 今年を記録</button>
        <button class="btn" style="background:linear-gradient(135deg,#e91e63,#c2185b)" onclick="sendToTeacher()">📤 先生に送信</button>
        <button class="btn" style="background:linear-gradient(135deg,#FF5722,#FF7043)" onclick="testModal()">⚙️ 初回設定（TEST）</button>
    </div>
    
    <div class="card no-print" style="text-align:center">
        性別：<select id="gender" style="padding:8px;border-radius:8px;border:2px solid #e0e0e0;margin:0 10px" onchange="RT();RS();U();updateTrackingView();">
            <option value="male">男子</option>
            <option value="female">女子</option>
        </select>
        学年：<select id="grade" style="padding:8px;border-radius:8px;border:2px solid #e0e0e0;margin:0 10px" onchange="U();">
            <option value="1">中1</option>
            <option value="2" selected>中2</option>
            <option value="3">中3</option>
        </select>
        組：<select id="class" style="padding:8px;border-radius:8px;border:2px solid #e0e0e0;margin:0 10px">
            <option value="A">A組</option><option value="B">B組</option><option value="C">C組</option><option value="D">D組</option>
        </select>
        測定回：<select id="session" style="padding:8px;border-radius:8px;border:2px solid #e0e0e0;margin:0 10px">
            <option value="1">1回目</option><option value="2">2回目</option><option value="3">3回目</option>
        </select>
    </div>
    
    <div class="card">
        <h2 style="color:#2b6cb0;margin-top:0">📈 マイレコード</h2>
        <div id="table"></div>
    </div>
    
    <div class="card no-print" style="text-align:center">
        <button class="btn" style="background:linear-gradient(135deg,#2c5282,#2b6cb0)" onclick="toggleRadar()">📊 レーダーチャート</button>
        <button class="btn" style="background:linear-gradient(135deg,#2c5282,#2b6cb0)" onclick="toggleGrowth()">📈 経年変化</button>
        <button class="btn" style="background:linear-gradient(135deg,#9c27b0,#7b1fa2)" onclick="toggleAnalysis()">🎮 体力分析</button>
        <button class="btn" style="background:linear-gradient(135deg,#FF5722,#FF7043)" onclick="toggleTracking()">📈 種目別トラッキング</button>
    </div>
    
    <div id="radar" style="display:none" class="card"><canvas id="rc" width="600" height="600"></canvas></div>
    <div id="growth" style="display:none" class="card"><canvas id="gc" width="1000" height="500"></canvas></div>

    <div id="tracking" style="display:none" class="card">
        <h3 style="text-align:center;color:#FF5722;margin-bottom:30px">📈 種目別トラッキング</h3>
        <div style="background:#fff3e0;padding:25px;border-radius:15px;margin-bottom:30px;border:1px solid #ffe0b2">
            <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:15px">
                <div>種目：<select id="trackingEvent" style="width:100%;padding:8px;border-radius:8px;border:2px solid #ffccbc"></select></div>
                <div>記録：<input type="number" id="trackingValue" step="0.1" style="width:100%;padding:8px;border-radius:8px;border:2px solid #ffccbc"></div>
                <div>単位：<input type="text" id="trackingUnit" style="width:100%;padding:8px;border-radius:8px;border:2px solid #ffccbc"></div>
                <div>日付：<input type="date" id="trackingDate" style="width:100%;padding:8px;border-radius:8px;border:2px solid #ffccbc"></div>
            </div>
            <button class="btn" style="width:100%;margin-top:20px;background:#FF5722" onclick="addTrackingRecord()">記録を追加</button>
        </div>
        <div>表示種目：<select id="trackingViewEvent" onchange="updateTrackingView()"></select></div>
        <div style="height:400px;margin-top:20px"><canvas id="trackingGraph"></canvas></div>
        <div id="trackingList"></div>
    </div>

    <div class="card no-print"><h2>⭐ 点数基準</h2><div id="score"></div></div>
    <div class="card no-print"><h2>🏆 総合ランク</h2><div id="eval"></div></div>
    
    <div id="setupModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:2000">
        <div style="max-width:900px;margin:50px auto;background:white;border-radius:20px;padding:40px"><div id="setupContent"></div></div>
    </div>
    <div id="notif" class="notification"></div>

    <script src="script.js"></script>
</body>
</html>
